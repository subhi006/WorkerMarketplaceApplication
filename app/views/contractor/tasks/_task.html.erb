<h1 class="text-center mb-4">Task</h1>
<div class="container mt-4">
  <div class="card p-4 mb-4 shadow-sm rounded-lg">
    <p class="fs-5 text-info"><strong><%= task.current_status %></strong></p>
    <p class="fs-5"><strong>Task Category:</strong> <%= category(task) %></p>
    <p class="fs-5"><strong>Duration:</strong> <%= task.duration %></p>
    <p class="fs-5"><strong>Location:</strong> <%= task.location %></p>
    <p class="fs-5"><strong>Number of Positions:</strong> <%= task.number_of_position %></p>
    <p class="fs-5"><strong>Shift Timing:</strong> <%= task.sift %></p>
    <p class="fs-5"><strong>Shift Hours:</strong> <%= task.sift_hours %></p>
    <p class="fs-5"><strong>Job Mode:</strong> <%= task.job_mode %></p>
    <p class="fs-5"><strong>Company:</strong> <%= task.company %></p>
    <p class="fs-5"><strong>Description:</strong> <%= task.description %></p>
    <p class="fs-5"><strong>Salary:</strong> <%= number_to_human(task.salary) %></p>
    <p class="fs-5"><strong>Time:</strong> <%= formate_date_time(task.updated_at)%></p>
    <% if can? :update, task %>
      <div class="mt-3">
        <% if task.not_available? || task.status.blank? %>
          <%= button_to "Post Task", task_post_contractor_task_path(task), formmethod: :post, class: "btn btn-outline-success w-100 py-2 shadow-sm" , data: { confirm: "Are you sure?" } %>
        <% else %>
          <p class="text-success fw-bold">Task is already posted.</p>
        <% end %>
        <%= link_to "Applicants",contractor_per_task_appliation_path(task), class: "btn btn-outline-primary w-100 py-2 mt-2 shadow-sm" %>
        <%= link_to "Edit Task", edit_contractor_task_path(task), class: "btn btn-outline-primary w-100 py-2 mt-2 shadow-sm" %>
        <% if can? :destroy , Task%>
          <%= button_to "Delete", contractor_task_path(task),method: :delete, data:{turbo_confirm: "Are you sure?"}, class: "btn btn-outline-primary w-100 py-2 mt-2 shadow-sm"%>
        <%end%>
      </div>
    <% end %>
    <% if can? :create, Application%>
       <% if task_applied(task)%>
         <p class="text-center mb-4"><strong>Applied successfully</strong></p>
       <%else%> 
       <div class="text-center mb-4">
       <%= form_with url: worker_task_applications_path(task), method: :post do %>
         <%= submit_tag 'Apply for this Task' %>
       <% end %>
       </div>
      <% end %>
    <% end %>
  </div>
</div>
