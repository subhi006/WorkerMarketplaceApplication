
<% if @tasks.present? %>
<br>
  <div class="row align-items-center">
    <div class="col-md-8">
      <h3>List of All Tasks</h3>
    </div>
    <div class="col-md-4 text-end">
      <% if can? :create, Task %>
        <%= link_to "Create New Task", new_contractor_task_path, class: "btn btn-sm btn-primary" %>
      <% end %>
    </div>
  </div>
<br>
  <div class="row">
    <div class="col-md-12">
      <div class="row">
        <% @tasks.each_with_index do |task, index| %>
          <div class="col-md-4 mb-4">
            <div class="card shadow-sm">
              <div class="card-header bg-primary text-white text-center">
                <h5><%=category(task)%></h5>
              </div>
              <div class="card-body">
                <p><strong>Company:</strong> <%= task.company %></p>
                <p><strong>Location:</strong> <%= task.location %></p>
                <p><strong>Applications:</strong> <%= task.applications.count || "0" %></p>

                <div class="d-flex justify-content-around mt-3">
                  <%= link_to "View", contractor_task_path(task), class: "btn btn-success btn-sm" %>

                  <% if can? :update, task %>
                    <% if task.not_available? || task.status.blank? %>
                      <%= button_to "Post", task_post_contractor_task_path(task), formmethod: :post, data: { confirm: "Are you sure?" }, class: "btn btn-primary btn-sm" %>
                    <% else %>
                      <span class="badge bg-success">Posted</span>
                    <% end %>
                  <% end %>

                  <%= link_to "Applicants",contractor_per_task_appliation_path(task), class: "btn btn-secondary btn-sm" %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>

<% else %>
<br>
  <div class="row align-items-center">
    <div class="col-md-8">
      <h3>There are no tasks created.</h3>
    </div>

    <div class="col-md-4 text-end">
      <% if can? :create, Task %>
        <%= link_to "Create New Task", new_contractor_task_path, class: "btn btn-primary btn-lg" %>
      <% end %>
    </div>
  </div>
<br>
<% end %>
